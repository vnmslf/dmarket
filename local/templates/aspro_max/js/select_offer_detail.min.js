!function(window){function setDeliverySKU(th,obj){var buyBlock=th.find(".offer_buy_block"),input_value=obj.CONFIG.MIN_QUANTITY_BUY;buyBlock.find("input[name=quantity]").length&&(input_value=buyBlock.find("input[name=quantity]").val());var $calculate=buyBlock.closest(".catalog_detail").find(".calculate-delivery");if($calculate.length&&($calculate.each((function(){var $calculateSpan=$(this).find("span[data-event=jqm]").first();if($calculateSpan.length){var $clone=$calculateSpan.clone();$clone.attr("data-param-product_id",obj.ID).attr("data-param-quantity",input_value).removeClass("clicked"),$clone.insertAfter($calculateSpan).on("click",(function(){$(this).parent().addClass("loadings")})),$calculateSpan.remove()}if($(this).hasClass("with_preview")){$(this).removeClass("inited"),this.timerInitCalculateDelivery&&clearTimeout(this.timerInitCalculateDelivery);var that=this;this.timerInitCalculateDelivery=setTimeout((function(){initCalculatePreview(),that.timerInitCalculateDelivery=!1}),1e3)}})),"ADD"===obj.CONFIG.ACTION&&!0===obj.CONFIG.CAN_BUY?$calculate.show():$calculate.hide()),th.find(".cheaper_form").length){var cheaper_form=th.find(".cheaper_form span");cheaper_form.data("autoload-product_name",obj.NAME),cheaper_form.data("autoload-product_id",obj.ID)}InitFancyBoxVideo(),"object"==typeof obMaxPredictions&&obMaxPredictions.showAll()}function UpdatePropsSKU(container,obj){container.find(".js-offers-prop").length||(container=container.closest(".product-container"));const $props=container.find(".js-offers-prop:first");if($props.length&&(container.find(".js-prop").remove(),obj.DISPLAY_PROPERTIES)){if(!Object.keys(obj.DISPLAY_PROPERTIES).length)return;if(!window.propTemplate){let $clone=$props.clone();$clone.find("> *:not(:first-child)").remove(),$clone.find(".js-prop-replace").removeClass("js-prop-replace").addClass("js-prop"),$clone.find(".js-prop-title").text("#PROP_TITLE#"),$clone.find(".js-prop-value").text("#PROP_VALUE#"),$clone.find(".hint").remove();let cloneHtml=$clone.html();window.propTemplate=cloneHtml}let html="";for(let key in obj.DISPLAY_PROPERTIES){let title=obj.DISPLAY_PROPERTIES[key].NAME,value=obj.DISPLAY_PROPERTIES[key].DISPLAY_VALUE,str;html+=window.propTemplate.replace("#PROP_TITLE#",title).replace("#PROP_VALUE#",value)}html&&$props[0].insertAdjacentHTML("beforeend",html)}}function UpdateGroupPropsSKU(wrapper,obj){let container=wrapper.closest(".product-container");const $props=container.find(".js-offers-group-wrap:first");if($props.length&&(container.find(".js-offers-group").remove(),container.find(".js-offers-group__item").remove(),obj.DISPLAY_PROPERTIES&&obj.PROPS_GROUP_HTML)){if(!Object.keys(obj.DISPLAY_PROPERTIES).length)return;let tmpDiv=document.createElement("div");tmpDiv.innerHTML=obj.PROPS_GROUP_HTML;let offerPropGroups=tmpDiv.querySelectorAll(".js-offers-group"),noGroupContainer=container.find("[data-group-code='no-group']");if(offerPropGroups.length){let groupCode,elementPropGroup;for(let keyGroup=0;keyGroup<offerPropGroups.length;keyGroup++)groupCode=offerPropGroups[keyGroup].getAttribute("data-group-code"),elementPropGroup=container.find("[data-group-code='"+groupCode+"'] .js-offers-group__items-wrap"),elementPropGroup.length?elementPropGroup.append(offerPropGroups[keyGroup].querySelectorAll(".js-offers-group__item")):noGroupContainer.length?noGroupContainer.before(offerPropGroups[keyGroup]):$props.append(offerPropGroups[keyGroup])}}}function SetSliderPictSKU(wrapper,obj){let detailContainer=wrapper.closest(".catalog_detail"),mainGalleryContainer=detailContainer.find(".detail-gallery-big");if($gallery=detailContainer.find(".detail-gallery-big-slider:not(.detail-gallery-big-slider--magnifier)"),$galleryThumbWrap=detailContainer.find(".detail-gallery-big-slider-thumbs__inner"),$galleryThumb=detailContainer.find(".gallery-slider-thumb"),$gallery.length&&obj.GALLERY){const mainSlider=$gallery.data("swiper"),countPhoto=obj.GALLERY.length,mainSlideClassList=$gallery.data("slideClassList"),slideHtml=[],thumbsSlider=$galleryThumb.data("swiper"),thumbsSlideClassList=$galleryThumb.data("slideClassList"),slideThmbHtml=[],bFastview=!!wrapper.closest(".fast_view_frame").length;if(countPhoto>0){for(let i in obj.GALLERY){const image=obj.GALLERY[i],title=image.TITLE?image.TITLE:obj.NAME,alt=image.ALT?image.ALT:obj.NAME;"object"==typeof image&&slideHtml.push('<div id="photo-'+i+'" class="'+mainSlideClassList+'"><a href="'+obj.GALLERY[i].BIG.src+'" data-fancybox="gallery'+(bFastview?"_fast":"")+'" class="detail-gallery-big__link popup_link fancy" title="'+title+'"><img class="detail-gallery-big__picture rounded3" src="'+obj.GALLERY[i].SMALL.src+'" alt="'+alt+'" title="'+title+'" /></a></div>')}if($galleryThumb.length){if(countPhoto>1)for(let i in obj.GALLERY){const image=obj.GALLERY[i],title=image.TITLE?image.TITLE:obj.NAME,alt=image.ALT?image.ALT:obj.NAME;"object"==typeof image&&slideThmbHtml.push('<div id="thumb-photo-'+i+'" class="'+(0==i?"swiper-slide-thumb-active ":"")+thumbsSlideClassList+'"data-big="'+obj.GALLERY[i].BIG.src+'"><img class="gallery__picture" src="'+image.SMALL.src+'" alt="'+alt+'" title="'+title+'" data-xoriginalwidth="'+image.BIG.width+'" data-xoriginalheight="'+image.BIG.height+'" /> </div>')}$galleryThumb.attr("data-size",countPhoto)}}else slideHtml.push('<div class="detail-gallery-big__item detail-gallery-big__item--big detail-gallery-big__item--no-image swiper-slide"><span  class="detail-gallery-big__link" ><img class="detail-gallery-big__picture one rounded3" src="'+appAspro.sku.mainItemForOffers.NO_PHOTO+'" alt="'+obj.NAME+'" title="'+obj.NAME+'" /></span></div>');if(countPhoto){let newOfferImage=obj.GALLERY[0].BIG.src?obj.GALLERY[0].BIG.src:obj.GALLERY[0].SRC;detailContainer.find('link[itemprop="image"]').attr("href",newOfferImage)}if("MAGNIFIER"==arAsproOptions.THEME.DETAIL_PICTURE_MODE){var pict="";pict=obj.GALLERY&&obj.GALLERY[0]?'<a href="javascript:void(0)" class="detail-gallery-big__link fancy_zoom line_link" title="'+obj.GALLERY[0].TITLE+'"><img class="detail-gallery-big__picture rounded3 zoom_picture" border="0" src="'+obj.GALLERY[0].SMALL.src+'" alt="'+obj.GALLERY[0].ALT+'" title="'+obj.GALLERY[0].TITLE+'" data-xoriginal="'+obj.GALLERY[0].BIG.src+'" data-xoriginalwidth="'+obj.GALLERY[0].BIG.width+'" data-xoriginalheight="'+obj.GALLERY[0].BIG.height+'"/></a>':'<span class="detail-gallery-big__link line_link" ><img class="detail-gallery-big__picture one" border="0" src="'+appAspro.sku.mainItemForOffers.NO_PHOTO+'" alt="'+obj.NAME+'" title="'+obj.NAME+'" data-xoriginal2="'+appAspro.sku.mainItemForOffers.NO_PHOTO+'"/></span>';let xzoomPict=detailContainer.find(".line_link");xzoomPict.length&&xzoomPict.parent().html(pict),InitZoomPict()}void 0!==mainSlider&&(mainSlider.removeAllSlides(),mainSlider.appendSlide(slideHtml),mainSlider.update()),void 0!==thumbsSlider&&(thumbsSlider.removeAllSlides(),thumbsSlider.appendSlide(slideThmbHtml),thumbsSlider.update()),detailContainer.find(".popup_video").remove();let popUpVideo=obj.POPUP_VIDEO?obj.POPUP_VIDEO:appAspro.sku.mainItemForOffers.POPUP_VIDEO,bWithVideo=!1;if(popUpVideo){let popupHtml='<div class="video-block popup_video  sm"><a class="various video_link image dark_link" href="'+popUpVideo+'" title="'+BX.message("POPUP_VIDEO")+'"><span class="play text-upper font_xs"></span></a></div>';if($galleryThumbWrap.length)$(popupHtml).appendTo($galleryThumbWrap),bWithVideo=!0;else if(bFastview){let fastViewConteiner=detailContainer.find(".detail-stickers-wrap");fastViewConteiner.length&&($(popupHtml).appendTo(fastViewConteiner),bWithVideo=!0)}}bWithVideo?mainGalleryContainer.addClass("detail-gallery-big--with-video"):mainGalleryContainer.removeClass("detail-gallery-big--with-video"),InitFancyBox(),InitFancyBoxVideo()}}function SetArticleSKU(wrapper,obj){let articleBlock=(wrapper=wrapper.closest(".catalog_detail")).find(".product-info-headnote__article .article");if(articleBlock){var article_text=obj.ARTICLE?obj.ARTICLE:"";!article_text&&"Y"==obj.SHOW_ARTICLE_SKU&&appAspro.sku.mainItemForOffers.ARTICLE&&(article_text=appAspro.sku.mainItemForOffers.ARTICLE),articleBlock.find(".article__value").length&&articleBlock.find(".article__value").text(article_text),article_text?articleBlock.show():articleBlock.hide();let article_name=obj.ARTICLE_NAME?obj.ARTICLE_NAME:"";article_name&&articleBlock.find(".article__title").length&&articleBlock.find(".article__title").text(article_name+":")}}function SetHrefSKU(wrapper,obj){let titleHref=wrapper.find(".fast-view-title"),bottomHref=wrapper.find(".bottom-href-fast-view");titleHref.length&&titleHref.attr("href",obj.URL),bottomHref.length&&bottomHref.attr("href",obj.URL)}function SetServicesSKU(wrapper,obj){var servWrap=wrapper.closest(".product-container").find(".buy_services_wrap");servWrap.length&&(servWrap.attr("data-parent_product",obj.ID),servWrap.find(".services-item").each((function(){var serviceItem=$(this),basketItem=arBasketAspro.SERVICES[serviceItem.attr("data-item_id")+"_"+obj.ID];void 0!==basketItem&&basketItem.basket_id?(serviceItem.find('input[name="buy_switch_services"]').prop("checked",!0),serviceItem.find('.counter_block input[name="quantity"]').val(basketItem.quantity),serviceItem.addClass("services_on")):(serviceItem.removeClass("services_on"),serviceItem.find('input[name="buy_switch_services"]').prop("checked",!1))})))}function SetTitleSKU(wrapper,obj){if("Y"==arMaxOptions.THEME.CHANGE_TITLE_ITEM_DETAIL){var skuName="object"==typeof obj.IPROPERTY_VALUES&&obj.IPROPERTY_VALUES.ELEMENT_PAGE_TITLE?obj.IPROPERTY_VALUES.ELEMENT_PAGE_TITLE:obj.NAME,skuWindowTitle="object"==typeof obj.IPROPERTY_VALUES&&obj.IPROPERTY_VALUES.ELEMENT_META_TITLE?obj.IPROPERTY_VALUES.ELEMENT_META_TITLE:obj.NAME,bFastView;wrapper.find(".fastview-product").length?wrapper.find(".fast-view-title").html(skuName):($("h1").html(skuName),document.title=skuWindowTitle+""+appAspro.sku.mainItemForOffers.POSTFIX,"object"==typeof ItemObj&&(ItemObj.TITLE=skuName,ItemObj.WINDOW_TITLE=skuWindowTitle))}$('.catalog_detail input[data-sid="PRODUCT_NAME"]').attr("value",$("h1").text())}function setDescriptionSKU(wrapper,obj){var block=wrapper,detailTextBlockWrapper=block.closest(".product-container").find(".detail-text-wrap .ordered-block__text-wrap"),detailTextBlock=detailTextBlockWrapper.find(".ordered-block__text"),spoilerButton=detailTextBlockWrapper.find(".ordered-block__spoiler-btn"),previewTextBlock=block.find(".preview-text-replace");detailTextBlock.length&&appAspro.sku.mainItemForOffers.SHOW_SKU_DESCRIPTION&&(obj.DETAIL_TEXT.length?detailTextBlock.html(obj.DETAIL_TEXT):appAspro.sku.mainItemForOffers.DETAIL_TEXT.length&&detailTextBlock.html(appAspro.sku.mainItemForOffers.DETAIL_TEXT),"function"==typeof initCollapsedBlock&&(detailTextBlock.hasClass("opened")&&(detailTextBlock.addClass("lineclamp-3"),detailTextBlock.removeClass("opened"),spoilerButton.removeClass("show")),showCollapsedBlock(detailTextBlock,spoilerButton))),previewTextBlock.length&&appAspro.sku.mainItemForOffers.SHOW_SKU_DESCRIPTION&&(obj.PREVIEW_TEXT.length?previewTextBlock.html(obj.PREVIEW_TEXT):appAspro.sku.mainItemForOffers.PREVIEW_TEXT.length&&previewTextBlock.html(appAspro.sku.mainItemForOffers.PREVIEW_TEXT))}function setOfferSetSKU(wrapper,obj){var mainWrap=wrapper.closest(".product-container"),offerSet=mainWrap.find("[data-offerSetId]"),currentOfferSet=mainWrap.find("[data-offerSetId="+obj.ID+"]");offerSet.length&&offerSet.hide(),offerSet.length&&currentOfferSet.show()}function SetViewedSKU(obj){var arPriceItem=obj.MIN_PRICE;setViewedProduct(obj.ID,{PRODUCT_ID:appAspro.sku.mainItemForOffers.PRODUCT_ID,IBLOCK_ID:obj.IBLOCK_ID,NAME:obj.NAME,DETAIL_PAGE_URL:obj.URL,PICTURE_ID:obj.PREVIEW_PICTURE_FIELD?obj.PREVIEW_PICTURE_FIELD.ID:obj.PARENT_PICTURE?obj.PARENT_PICTURE.ID:!!obj.GALLERY.length&&obj.GALLERY[0].ID,CATALOG_MEASURE_NAME:obj.MEASURE,MIN_PRICE:arPriceItem,CAN_BUY:obj.CONFIG.CAN_BUY?"Y":"N",IS_OFFER:"Y",WITH_OFFERS:"N"})}function SetAdditionalGallerySKU(wrapper,obj){var $gallery=wrapper.closest(".product-container").find(".additional-gallery");if(void 0!==window.scrollTabsTimeout&&clearTimeout(window.scrollTabsTimeout),"function"==typeof ResizeScrollTabs&&(window.scrollTabsTimeout=setTimeout(ResizeScrollTabs,20)),$gallery.length){var bHidden=$gallery.hasClass("hidden"),bigGallery=$gallery.find(".big-gallery-block .owl-carousel"),smallGallery=$gallery.find(".small-gallery-block .row"),slideBigHtml=slideSmallHtml="",descTab=$('.nav.nav-tabs [href="#desc"]').closest("li"),galleryItems=obj.ADDITIONAL_GALLERY.concat(appAspro.sku.mainItemForOffers.ADDITIONAL_GALLERY);if(galleryItems.length){for(var i in bHidden&&($gallery.removeClass("hidden"),bigGallery.removeClass("owl-hidden"),descTab.removeClass("hidden")),$gallery.find(".switch-item-block .switch-item-block__count-wrapper--small .switch-item-block__count-value").text(galleryItems.length),$gallery.find(".switch-item-block .switch-item-block__count-wrapper--big .switch-item-block__count-value").text("1/"+galleryItems.length),galleryItems)"object"==typeof galleryItems[i]&&(slideBigHtml+='<div class="item"><a href="'+galleryItems[i].DETAIL.SRC+'" data-fancybox="big-gallery" class="fancy"><img class="picture" border="0" src="'+galleryItems[i].PREVIEW.src+'" alt="'+galleryItems[i].ALT+'" title="'+galleryItems[i].TITLE+'" /></a></div>',slideSmallHtml+='<div class="col-md-3"><div class="item"><a href="'+galleryItems[i].DETAIL.SRC+'" data-fancybox="small-gallery" class="fancy"><img class="picture" border="0" src="'+galleryItems[i].PREVIEW.src+'" alt="'+galleryItems[i].ALT+'" title="'+galleryItems[i].TITLE+'" /></a></div></div>');bigGallery.html(slideBigHtml),smallGallery.html(slideSmallHtml),void 0!==bigGallery.data("owl.carousel")&&bigGallery.data("owl.carousel").destroy(),InitOwlSlider(),InitFancyBox(),"function"==typeof ResizeScrollTabs&&ResizeScrollTabs()}else $gallery.addClass("hidden"),$gallery.closest(".tab-pane").find(".ordered-block").length<=1&&0===$gallery.closest(".tab-pane").find(".detail-text-wrap").length&&(descTab.addClass("hidden"),"function"==typeof SetActiveTab&&SetActiveTab($(wrapper.closest(".product-container").find(".tabs > .nav-tabs > li"))),"function"==typeof ResizeScrollTabs&&ResizeScrollTabs())}}window.appAspro=window.appAspro||{},window.appAspro.skuDetailJSLoad=!0,BX.addCustomEvent("onFinalActionSKUInfo",(function(eventdata){if(eventdata){let wrapper=eventdata.wrapper,objOffer=eventdata.offer,isDetail=wrapper.hasClass("product-main"),isFastView=wrapper.find(".fastview-product").length;isDetail&&(appAspro.sku.mainItemForOffers.hasOwnProperty("OID")&&appAspro.sku.mainItemForOffers.OID&&!isFastView&&setLocationSKU(objOffer.ID,appAspro.sku.mainItemForOffers.OID),setDescriptionSKU(wrapper,objOffer),setDeliverySKU(wrapper,objOffer),UpdatePropsSKU(wrapper,objOffer),UpdateGroupPropsSKU(wrapper,objOffer),SetSliderPictSKU(wrapper,objOffer),SetArticleSKU(wrapper,objOffer),SetServicesSKU(wrapper,objOffer),SetTitleSKU(wrapper,objOffer),SetViewedSKU(objOffer),SetAdditionalGallerySKU(wrapper,objOffer),setOfferSetSKU(wrapper,objOffer),"function"==typeof setNewHeader&&"Y"===arMaxOptions.THEME.SHOW_HEADER_GOODS&&setNewHeader(objOffer),isFastView&&SetHrefSKU(wrapper,objOffer))}}))}(window);